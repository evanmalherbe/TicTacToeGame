@{
    ViewData["Title"] = "Home Page";
}
@* d-flex justify-content-center align-items-center *@
<div class="row g-0">
    <div id="options-div" class="col p-2 optionsHeight">
        <h4 class="text-center">Options</h4>
    </div>
    <div id="mainBoard" class="col-6 border row g-0 board-height"> </div>
    <div id="score-div" class="col p-2 score-height">
        <h4 class="text-center">Scoreboard</h4>
    </div>
</div>


@section scripts
    {
    <script type="text/javascript">

        let currentPlayer = 1;

        $(document).ready(async function ()
        {
            drawBoard();
        });

        function isEmpty(element)
        {
            // Is element empty (ignore invisible elements such as spaces and line breaks)
            return !$.trim(element.html());
        }

        function insertGamePiece(id)
        {
            let cross = '<i class="fa-solid fa-xmark huge-icon" style="color: #000000;"></i>';
            let circle = '<i class="fa-regular fa-circle less-huge-icon" style="color: #ff0000;"></i>';
            let whichIcon = currentPlayer === 1 ? cross : circle;
            let dataValue = currentPlayer === 1 ? "cross" : "circle";
            
            if (isEmpty($(`#${id}`)))
            {
                $(`#${id}`).append(whichIcon);
                $(`#${id}`).attr('data-game-piece', dataValue);

                currentPlayer = currentPlayer === 1 ? 2 : 1;
                checkForWinner();
            }
        }

        function checkForWinner()
        {

        }

        function changeBorder(blockId)
        {
            // if already has red border
            if ($(`#${blockId}`).hasClass('redBorder'))
            {
                if (!$(`#${blockId}`).hasClass('border'))
                {
                    $(`#${blockId}`).addClass('border')
                }
                $(`#${blockId}`).removeClass("redBorder");
            }
            else
            {
                // does not yet have red border
                $(".block").removeClass("redBorder").removeClass("border");
                $(".block").addClass("border");

                if ($(`#${blockId}`).hasClass('border'))
                {
                    $(`#${blockId}`).removeClass("border");
                }
                $(`#${blockId}`).addClass("redBorder");
            }
        }

        function drawBoard()
        {
            let blockArray = [];

            for (let i = 0; i < 9; i++)
            {
                let block = `<div
                            class="col-4 border block blockHeight d-flex justify-content-center align-items-center"
                            id="block-${i}"
                            onClick="insertGamePiece('block-${i}')"></div>`;
                blockArray.push(block);
            }

            $("#mainBoard").append(blockArray.join(""));
        }
    </script>
}
